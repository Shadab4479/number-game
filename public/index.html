<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reverse Number Game - Desi Edition</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css"> <style>
        :root { --primary: #ff4757; --safe: #2ecc71; --dark: #1e272e; --glass: rgba(255, 255, 255, 0.1); }
        body { font-family: 'Poppins', sans-serif; background: #1e272e; color: white; margin: 0; min-height: 100vh; display: flex; align-items: center; justify-content: center; text-align: center; }
        .container { width: 90%; max-width: 500px; background: var(--glass); backdrop-filter: blur(10px); padding: 2rem; border-radius: 20px; border: 1px solid rgba(255,255,255,0.1); }
        #my-secret-display { background: rgba(0,0,0,0.5); padding: 10px; border-radius: 10px; margin: 10px auto; cursor: pointer; border: 1px solid #ffa502; color: #ffa502; font-weight: bold; display: inline-block; user-select: none; }
        .grid-container { padding: 10px; border-radius: 10px; transition: all 0.3s ease; }
        .my-turn-glow { border: 2px solid #2ecc71; box-shadow: 0 0 20px rgba(46, 204, 113, 0.5); background: rgba(46, 204, 113, 0.1); }
        .player-status-container { display: flex; flex-wrap: wrap; justify-content: center; gap: 10px; margin-top: 15px; }
        .player-pill { background: rgba(0,0,0,0.3); padding: 8px 15px; border-radius: 20px; font-size: 0.9rem; display: flex; align-items: center; gap: 5px; }
        .player-pill.ready { background: var(--safe); color: #000; font-weight: bold; }
        .player-pill.waiting { border: 1px solid #aaa; color: #aaa; }
        .fab { position: fixed; bottom: 20px; right: 20px; width: 60px; height: 60px; background: #ffa502; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 24px; cursor: pointer; box-shadow: 0 4px 10px rgba(0,0,0,0.3); z-index: 100; }
        .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 200; align-items: center; justify-content: center; }
        .modal-content { background: #2f3640; padding: 20px; border-radius: 15px; width: 80%; max-width: 300px; }
        input, select, button { width: 80%; padding: 12px; margin: 10px 0; border-radius: 8px; border: none; font-size: 16px; }
        button { background: var(--primary); color: white; cursor: pointer; font-weight: bold; }
        .grid { display: grid; grid-template-columns: repeat(5, 1fr); gap: 8px; margin-top: 20px; }
        .cell { background: rgba(255,255,255,0.1); padding: 15px 0; border-radius: 5px; cursor: pointer; }
        .cell.selected { border: 2px solid #ffa502; background: rgba(255,165,2,0.2); }
        .cell.safe-cut { background: var(--safe); color: #000; font-weight: bold; pointer-events: none; }
        .cell.normal-cut { background: #555; opacity: 0.3; pointer-events: none; }
        .hidden { display: none; }
        .turn-indicator { font-size: 1.2rem; margin-bottom: 10px; font-weight: bold; }
        #timer { font-size: 2.5rem; color: #ff4757; }
        #result-overlay { position: fixed; top: 20%; left: 50%; transform: translateX(-50%); background: rgba(0,0,0,0.9); padding: 20px; border-radius: 10px; font-size: 1.5rem; font-weight: bold; color: #ffa502; z-index: 300; display: none; border: 2px solid white; }
    </style>
</head>
<body>

    <div class="fab" onclick="toggleScoreboard()">üèÜ</div>

    <div id="score-modal" class="modal" onclick="toggleScoreboard()">
        <div class="modal-content" onclick="event.stopPropagation()">
            <h2>üèÜ Leaderboard (Losses)</h2>
            <ul id="scoreboard-list" style="list-style: none; padding: 0;"></ul>
            <button onclick="toggleScoreboard()">Close</button>
        </div>
    </div>

    <div id="result-overlay"></div>

    <div class="container">
        <div id="menu-screen">
            <h1>ESCAPE THE GRID üèÉ‚Äç‚ôÇÔ∏è</h1>
            <p>Last man standing LOSES!</p>
            <input type="text" id="username" placeholder="Enter Your Name">
            <button onclick="createRoomMenu()">Create Room</button>
            <button onclick="joinRoomMenu()">Join Room</button>
        </div>

        <div id="join-input-screen" class="hidden">
            <input type="number" id="room-code-input" placeholder="Room Code">
            <button onclick="joinRoom()">Enter</button>
        </div>

        <div id="lobby-screen" class="hidden">
            <h2>Room Code: <span id="display-room-code" style="color:#ffa502"></span></h2>
            <div id="lobby-players-area">
                <div class="player-status-container" id="lobby-pills"></div>
            </div>
            <div id="host-controls" class="hidden">
                <p>Select Size:</p>
                <select id="grid-range">
                    <option value="20">1 to 20</option>
                    <option value="30">1 to 30</option>
                </select>
                <button onclick="setGameRange()">Confirm & Start</button>
            </div>
        </div>

        <div id="secret-screen" class="hidden">
            <h2>Pick Secret Number ü§´</h2>
            <div class="player-status-container" id="secret-pills"></div>
            <div id="secret-grid" class="grid"></div>
            <button id="start-btn" class="hidden" onclick="triggerStartGame()">START GAME</button>
        </div>

        <div id="game-screen" class="hidden">
            <div id="timer">30</div>
            <div id="my-secret-display" onclick="peekSecret()">My Secret: üîí (Hold/Click)</div>
            <div class="turn-indicator" id="turn-msg">Game Starting...</div>
            <div id="game-grid-wrapper" class="grid-container">
                <div id="main-grid" class="grid"></div>
            </div>
        </div>
    </div>

    <script src="/socket.io/socket.io.js"></script>
    <script src="script.js"></script>
</body>
</html>
